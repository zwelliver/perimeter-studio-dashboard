import{j as e}from"./index-BpSK1j1P.js";import{r as T,b as j,B as h,C as u,X as k,Y as m,T as p,d as i,L as g}from"./chart-vendor-nXq5J5EI.js";import"./date-vendor-QvLKA523.js";function A({tasks:b,team:f,shoots:d,deadlines:l}){const[o,x]=T.useState("projects"),y=()=>{if(!b)return[];const t={};return b.forEach(a=>{t[a.project]=(t[a.project]||0)+1}),Object.entries(t).map(([a,r])=>({name:a,value:r})).sort((a,r)=>r.value-a.value).slice(0,8)},C=()=>f?f.map(t=>({name:t.name,current:t.current,max:t.max,utilization:t.max>0?(t.current/t.max*100).toFixed(0):0})):[],v=()=>{if(!d&&!l)return[];const t={},a=new Date;return d==null||d.forEach(r=>{const c=new Date(r.datetime),s=Math.floor((c-a)/(7*24*60*60*1e3));if(s>=0&&s<4){const n=s===0?"This Week":`Week +${s}`;t[n]=t[n]||{shoots:0,deadlines:0},t[n].shoots++}}),l==null||l.forEach(r=>{const c=new Date(r.due_date),s=Math.floor((c-a)/(7*24*60*60*1e3));if(s>=0&&s<4){const n=s===0?"This Week":`Week +${s}`;t[n]=t[n]||{shoots:0,deadlines:0},t[n].deadlines++}}),Object.entries(t).map(([r,c])=>({week:r,...c}))},w=()=>{const t=y();return e.jsx(j,{width:"100%",height:300,children:e.jsxs(h,{data:t,children:[e.jsx(u,{strokeDasharray:"3 3",stroke:"rgba(96, 187, 233, 0.2)"}),e.jsx(k,{dataKey:"name",stroke:"#a8c5da",angle:-45,textAnchor:"end",height:100}),e.jsx(m,{stroke:"#a8c5da"}),e.jsx(p,{contentStyle:{background:"rgba(9, 36, 63, 0.95)",border:"1px solid rgba(96, 187, 233, 0.3)",borderRadius:"8px",color:"#e0e6ed"}}),e.jsx(i,{dataKey:"value",name:"At-Risk Tasks",fill:"#60BBE9"})]})})},D=()=>{const t=C();return e.jsx(j,{width:"100%",height:300,children:e.jsxs(h,{data:t,children:[e.jsx(u,{strokeDasharray:"3 3",stroke:"rgba(96, 187, 233, 0.2)"}),e.jsx(k,{dataKey:"name",stroke:"#a8c5da"}),e.jsx(m,{stroke:"#a8c5da"}),e.jsx(p,{contentStyle:{background:"rgba(9, 36, 63, 0.95)",border:"1px solid rgba(96, 187, 233, 0.3)",borderRadius:"8px",color:"#e0e6ed"}}),e.jsx(g,{}),e.jsx(i,{dataKey:"current",name:"Current Hours",fill:"#60BBE9"}),e.jsx(i,{dataKey:"max",name:"Max Capacity",fill:"#4ecca3"})]})})},B=()=>{const t=v();return e.jsx(j,{width:"100%",height:300,children:e.jsxs(h,{data:t,children:[e.jsx(u,{strokeDasharray:"3 3",stroke:"rgba(96, 187, 233, 0.2)"}),e.jsx(k,{dataKey:"week",stroke:"#a8c5da"}),e.jsx(m,{stroke:"#a8c5da"}),e.jsx(p,{contentStyle:{background:"rgba(9, 36, 63, 0.95)",border:"1px solid rgba(96, 187, 233, 0.3)",borderRadius:"8px",color:"#e0e6ed"}}),e.jsx(g,{}),e.jsx(i,{dataKey:"shoots",name:"Shoots",fill:"#60BBE9",stackId:"a"}),e.jsx(i,{dataKey:"deadlines",name:"Deadlines",fill:"#ffc107",stackId:"a"})]})})};return e.jsxs("div",{className:"card project-insights",children:[e.jsx("h2",{children:"ðŸ“Š Interactive Analytics"}),e.jsxs("div",{className:"chart-selector",children:[e.jsx("button",{className:o==="projects"?"active":"",onClick:()=>x("projects"),children:"ðŸ“ At-Risk by Project"}),e.jsx("button",{className:o==="team"?"active":"",onClick:()=>x("team"),children:"ðŸ‘¥ Team Workload"}),e.jsx("button",{className:o==="timeline"?"active":"",onClick:()=>x("timeline"),children:"ðŸ“… 4-Week Timeline"})]}),e.jsxs("div",{className:"chart-container",children:[o==="projects"&&w(),o==="team"&&D(),o==="timeline"&&B()]})]})}export{A as default};
